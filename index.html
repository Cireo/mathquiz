<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player's Math Quest! 🦊✨</title>
    <link rel="stylesheet" href="src/css/main.css">
    <link rel="stylesheet" href="src/css/animations.css">
</head>
<body>
    <!-- Welcome Screen -->
    <div id="welcome-screen" class="screen active">
        <div class="container">
            <h1 class="title">🌟 Player's Math Quest! 🌟</h1>
            <div class="mascot">🦊</div>
            <p class="subtitle">Let's practice math together!</p>
            
            <div class="difficulty-selection">
                <h3>Choose your level:</h3>
                <button class="difficulty-btn" data-level="beginner">
                    🌱 Beginner
                    <small>Single digits & easy times tables</small>
                </button>
                <button class="difficulty-btn" data-level="intermediate">
                    🌿 Intermediate  
                    <small>Two digits & more times tables</small>
                </button>
                <button class="difficulty-btn" data-level="advanced">
                    🌳 Advanced
                    <small>Mixed operations & division</small>
                </button>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen">
        <div class="container">
            <!-- Header with stats -->
            <div class="game-header">
                <div class="stat-item">
                    <span class="label">Score:</span>
                    <span id="score" class="value">0</span>
                </div>
                <div class="stat-item">
                    <span class="label">Streak:</span>
                    <span id="streak" class="value">0</span>
                    <span id="streak-fire" class="streak-indicator">🔥</span>
                </div>
                <div class="stat-item">
                    <span class="label">Level:</span>
                    <span id="level" class="value">1</span>
                </div>
            </div>

            <!-- Progress bar -->
            <div class="progress-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>

            <!-- Problem display -->
            <div class="problem-container">
                <div id="problem" class="problem-text">2 + 3 = ?</div>
            </div>

            <!-- Answer input -->
            <div class="answer-container">
                <input type="number" id="answer-input" placeholder="Your answer..." autofocus>
                <button id="submit-btn" class="submit-button">Check Answer! ✨</button>
            </div>

            <!-- Feedback area -->
            <div id="feedback" class="feedback"></div>

            <!-- Achievement display -->
            <div id="achievement" class="achievement-popup"></div>
        </div>
    </div>

    <!-- Minigame Screen -->
    <div id="minigame-screen" class="screen">
        <div class="minigame-container">
            <div class="minigame-header">
                <h2 class="minigame-title">🦊 Player's Math Battle! 🧙‍♀️</h2>
                <div class="minigame-stats">
                    <div class="fox-health">
                        <span class="health-label">Fox Health:</span>
                        <div class="health-bar">
                            <div id="fox-health-fill" class="health-fill"></div>
                        </div>
                    </div>
                    <div class="spells-remaining">
                        <span id="spells-count">5</span> spells remaining
                    </div>
                </div>
            </div>

            <div class="battle-arena">
                <!-- Fox Character -->
                <div id="fox-character" class="character fox">
                    <div class="character-sprite">🦊</div>
                    <div class="character-name">Player</div>
                </div>

                <!-- Battle Field -->
                <div id="battle-field" class="battle-field">
                    <!-- Math spell projectiles will appear here -->
                </div>

                <!-- Witch Character -->
                <div id="witch-character" class="character witch">
                    <div class="character-sprite">🧙‍♀️</div>
                    <div class="character-name">Math Witch</div>
                </div>
            </div>

            <!-- Answer Input for Minigame -->
            <div class="minigame-input">
                <!-- Regular input spell -->
                <div id="input-spell-mode" class="spell-mode">
                    <input type="number" id="minigame-answer" placeholder="Quick! Type answer..." autofocus>
                    <button id="minigame-submit" class="minigame-submit-button">Defend! ⚔️</button>
                    <div id="current-spell" class="current-spell-display">Incoming spell: 7 + 3 = ?</div>
                </div>

                <!-- Multiple choice spell -->
                <div id="choice-spell-mode" class="spell-mode hidden">
                    <div class="choice-spell-equation" id="choice-equation">5 × 4 = ?</div>
                    <div class="choice-options">
                        <div class="choice-option" id="choice-high" data-position="high">
                            <span class="choice-label">↑</span>
                            <span class="choice-value">25</span>
                        </div>
                        <div class="choice-option fox-position" id="choice-middle" data-position="middle">
                            <span class="choice-label">🦊</span>
                            <span class="choice-value">20</span>
                        </div>
                        <div class="choice-option" id="choice-low" data-position="low">
                            <span class="choice-label">↓</span>
                            <span class="choice-value">15</span>
                        </div>
                    </div>
                    <div class="choice-instructions">Use ↑↓ arrow keys to move the fox!</div>
                </div>
            </div>

            <!-- Minigame Feedback -->
            <div id="minigame-feedback" class="minigame-feedback"></div>
        </div>
    </div>

    <!-- Results Screen -->
    <div id="results-screen" class="screen">
        <div class="container">
            <h2 class="results-title">🎉 Great Job! 🎉</h2>
            <div class="results-stats">
                <div class="stat">
                    <span class="stat-label">Final Score:</span>
                    <span id="final-score" class="stat-value">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Best Streak:</span>
                    <span id="best-streak" class="stat-value">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Problems Solved:</span>
                    <span id="problems-solved" class="stat-value">0</span>
                </div>
            </div>
            <div class="results-actions">
                <button id="play-again-btn" class="action-button">Play Again! 🎮</button>
                <button id="change-level-btn" class="action-button">Change Level 📊</button>
                <button id="continue-quest-btn" class="action-button">Continue Quest! ⚔️</button>
            </div>
        </div>
    </div>

    <!-- Loading scripts -->
    <script src="src/js/math-engine.js"></script>
    <script src="src/js/storage.js"></script>
    <script src="src/js/animations.js"></script>
    <script src="src/js/minigame.js"></script>
    <script src="src/js/ui.js"></script>
    <script src="src/js/game.js"></script>
</body>
</html>
